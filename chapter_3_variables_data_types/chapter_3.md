# Глава 3: Работа с переменными

## Понятие переменной

**_Переменные_** - это символические имена в программе. Точно так же, как
`x` может предоставлять некоторое пока еще неизвестное значение в алгебре
или точку на пиратской карте, обозначить место, где зарыты сокровища, переменные
в программировании использовать для представления всевозможных величин.

Можете считать переменные контейнерами, предназначенными для хранения данных.
Этим контейнерам можно присваивать имена и впоследствии использовать их для
извлечения и изменения хранимых данных.

```javascript
var firstNumber = 3
var secondNumber = 7

var total = Number(firstNumber) + Number(secondNumber)

alert(total)
```

## Обьявление переменных

**_Обьявление переменной_** - это технический термин, который используется для
описания процесса первоначального создания переменной в программе. Вам также
может встретиться эквивалентный ему термин _инициализация_. Создание переменной,
обьявление переменной, инициализация переменной - все эти выражения имеют один и
тот же смысл.

В JS переменные можно создавать одним из двух способов.

- С использованием ключевого слова `var`.
  `var myName;`
  Переменной, обьявляемой с помощью ключевого слова `var`, можно присвоить
  начальное значение в момент ее создания (это называется _инициализацией
  переменной_).
  `var myName = "Chris";`
- Без использования ключевого слова `var`.
  `myName = "Chris";`

## Глобальные и локальные области видимости

Как и где обьявлять переменную, зависит от того, как именно ив каких местах
программы эта переменная используется. Ключевую роль здесь играет понятие
_области видимости переменной_. В JS существует два типа области видимости.

- _Глобальные переменные_ могут использоваться в любом месте программы.
- _Локальные переменные_ (переменные функции) - это переменные, создаваемые в
  защищенных программах, которые располагаются в основной программе и называются
  _функциями_

Лучше использовать локальные переменные, а не глобальные, поскольку ограничение
области видимости снижает вероятность того, что значение данной переменной будет
случайно заменено значением другой переменной с тем же именем.

## Именование переменных

Имена переменных могут начинаться с одного из следующих символов:

- Буква в верхнем или нижнем регистре;
- Символ подчеркивания \_
- Знак доллара $

Не забывайте о том, что язык JS чувствителен к регистру. Переменные с именами
`myname`, `Myname` и `myName` - это разные переменные.

Имена переменных являются идентификаторами. Лучше всего давать осмысленные и
точные имена переменным.

Разумеется, чтобы не усложнять себе жизнь, не следует использовать слишком
длинные имена переменных. Если для точной передачи смысла переменной потребуется
имя длиной 20 символов, это нормально. Но если вы создаете переменные с такими
именами, как `nameOfPersonWhoJustFilledOutTheFormOnMyWebsite`, то, вероятно,
стоит использовать более короткие имена наподобие `personName`, чтобы
3простить
жизнь себе, а также другим людям, которые, возможно будут читать ваш код,

### Рекомендации по созданию хороших имен переменных

Существуют проверенные опытом правила именования переменных, которые стараются
придерживаться программисты на JS. Вот эти правила.

- Не используйте слишком короткие имена! Имена, состоящие из одной буквы, равно
  как и имена, несущие никакого смысла, далеко не лучший выбор для использования
  в качестве имен переменных.
- Используйте составные имена, чтобы как можно точнее описать назначение
  переменных.
- В составных именах всегда располагайте прилагательные слева, например
  `var greenPython;`.

Выберете определенный стиль для составных имен и строго придерживайтесь его.
Возможно два способа обьединения слов для создания имени: использование "
верблюжего" стиля или символов подчеркивания.

Некоторые слова нельзя использовать в качестве имен переменных. Ниже приведен
перечень зарезервированных слов, которые не могут выступать в качестве названий
переменных, функций, методов, меток циклов и обьектов.

|              |             |              |                |
| ------------ | ----------- | ------------ | -------------- |
| `abstract`   | `else`      | `instanceof` | `switch`       |
| `boolean`    | `enum`      | `int`        | `synchronized` |
| `break`      | `export`    | `interface`  | `this`         |
| `byte`       | `extend`    | `long`       | `let`          |
| `false`      | `native`    | `throws`     | `catch`        |
| `final`      | `new`       | `transient`  | `char`         |
| `finally`    | `null`      | `true`       | `class`        |
| `float`      | `package`   | `try`        | `const`        |
| `for`        | `private`   | `typeof`     | `continue`     |
| `function`   | `protected` | `var`        | `debugger`     |
| `goto`       | `public`    | `void`       | `default`      |
| `if`         | `return`    | `volatile`   | `delete`       |
| `implements` | `short`     | `while`      | `do`           |
| `import`     | `static`    | `with`       | `double`       |
| `in`         | `super`     | `throw`      | `case`         |

### Создание констант с помощью ключевого слова const

Иногда может возникать необходимость в переменных, которые не могут быть
изменены. Подобные переменные, которые называют _константами_, обьявляют с
помощью ключевого слова `const`.

```javascript
const heightOfTheEmpireStateBuilding = 1454
const speedOfLight = 299792458
```

Константы подчиняются тем же правилам, что и другие переменные, но коль скоро вы создали переменную как константу, ее значение не может быть изменено на протяжении ее жизни (которая длится, пока выполняется сценарий).

## Работа с типами данных

_Тип данных_ переменной указывает на то, данные какого вида могут храниться в переменной и какие операции могут выполняться с использованием ее значения. Например, число `"10"`, используется в текстовом предложении, отличается от числа `10`, используемого в операции сравнения.

_Типы данных_ - это способ, используемый в JS для проведения различий между значениями, используемый текст, и значениями, которые должны обрабатываться как матеметические выражения.

### Пять основных типов данных

JS относится к категории _слабо типизированных языков_ - это означает, что от вас не требуется сообщать JS или даже знать это самому, будет ли создаваемая вами переменная содержать слово, число или какой-либо другой тип данных.

Слабая типизация означает, что JS не требует, чтобы вы сообщали ему о том, что есть число, а что есть слово. Он с поблажкой относится к этому и незаметно для вас выполняет всю работу по определению типов данных, хранящихся в переменных.

#### Числовой тип данных

В JS числа хранятся в виде 64-разрядных значений с плавающей точкой. В отличие от большинства других языков программирования, в JS отсутствуют отдельные типы данных для целых числе и чисел с плавающей точкой.

Обьявление числовой переменной состоит из следующих элементов:

- Ключевое слово `var`;
- Имя, назначенное переменной;
- Оператор присваивания;
- число (или же выражение, которое сводится к числу);
- Точка с запятой;

Вот некоторые примеры корректного обьявления числовых переменных.

```javascript
var numberOfDucks = 4
var populationOfSpain = 47200000
var howManyTacos = 8
```

##### Функция `Number();`

В JS предусмотрена встроенная функция `Number()`, предназначенная для преобразования чисел, которые могут участвовать в вычислениях. Чтобы использовать эту функцию, просто укажите значение (или содержащую его переменную), которое вы хотите преобразовать в число, в круглых скобках после имени `Number`.

Функция `Number()` имеет четыре типа выходных значений, которые перечислены ниже.

- Числа отформатированные как текстовые строки, преобразуются в числа, которые могут участвовать в вычислениях: `Number("42"); // Возвращает число 42`
- В случае строк, которые не могут быть преобразованы в числа, возвращается значение NaN: `Number("eggs" // возвращает значение NaN)`
- В случае булевого значения `true` возвращается число 1: `Number(true); // Возвращает число 1`
- В случае булевого значения `false` возвращается число 0: `Number(false); // Возвращает число 0`

##### Функция `parseInt();`

Для JS все числа являются фактически числами с плавающей точкой. Однако с помощью функции `parseInt()` вы сможете взять только целую часть числа (без дробной части), отбросив все, что находится после десятичной точки.
`parseInt(100.33); // Возвращает 100`

##### Функция `parseFloat();`

Функция `parseFloat()` позволяет явно указать JS, что данное число должно трактоваться как число с плавающей точкой, ее можно использовать для преобразования строки в число, например:

```javascript
parseFloat(100.33) // Возвращает 100.33
parseFloat('10') // Возвращает 10
```

#### Строковый тип данных

Строки могут состоять из следующих символов:

- Буквы;
- Цифры;
- Знаки пунктуации (например, запятая или точка);
- Специальные символы, которые могут быть записаны с помощью символа с предшествующим ему символом обратной косой черты.

Некоторые символы, например кавычки, имеют в JS особый смысл или требуют использования особых сочетаний символов (например, символов табуляции или разрыва строки) для представления в строках. Мы называем их _специальными символами_. Специальные символы, которые можно использовать в строках JS.

| Код  | Описание               |
| ---- | ---------------------- |
| `\'` | Одинарная кавычка      |
| `\"` | Двойная кавычка        |
| `\\` | Обратная косая черта   |
| `\n` | Перевод строки         |
| `\r` | Возврат каретки        |
| `\t` | Табуляция              |
| `\b` | Возврат на один символ |
| `\f` | Подача формы           |

Строковая переменная создается путем заключения значения в одинарные или двойные кавычки: `var myString = "привет, я строка.";`

Не имеет никакого значения, какие кавычки вы для этого используете - одинарные или двойные, лишь бы открывающие и закрывающие кавычки были одного типа.

Окружив строку одинарными кавычками, можно беспрепятственно использовать двойные кавычки в составе самой строки. Подобным образом, заключив строку в двойные кавычки, вы без проблем сможете включать в нее одинарные кавычки.

##### Экранирование кавычек

Проблема включения кавычек в строку, окруженную кавычками того же типа, решается помещением символа обратной косой черты (`\`) перед внутренней кавычкой. Это называется _экранирование кавычек_.

##### Функции для работы со строками

В JS имеется много полезных функций, предназначенных для обработки и преобразования строк.

Ниже перечислены наиболее часто используемые встроенные функции для работы со строками.

- `CharAt()` - Возвращает символ, находящийся в указанной позиции в строке. Обратите внимание на то, что отсчет позиций начинается с 0.

```javascript
var watzThisString = 'JavaScript - Это здорово!'
console.log(watzThisString.charAt(3)) // Возвращает "а"
```

- `concat()` - Присоединяет к строке одну или несколько строк и возвращает обьединенную строку.

```javascript
var watzThisString = 'JavaScript - Это здорово!'
console.log(watzThisString.concat(' Нам нравится JS!')) // Возвращает "JavaScript - Это здорово! Нам нравится JS!"
```

- `indexOf()` - Выполняет поиск первого вхождения символа или подстроки в данной строке и возвращает номер соответствующей позиции.

```javascript
var watzThisString = 'JavaScript - Это здорово!'
console.log(watzThisString.indexOf('здорово')) // Возвращает 17
```

- `split()` - Разбивает строку на массив подстрок.

```javascript
var watzThisString = 'JavaScript - Это здорово!'
console.log(watzThisString.split('з')) // Возвращает ("JavaScript - Это ", "дорово!")
```

- `substr()` - Извлекает часть строки, начиная с указанной позиции, и возвращает указанное количество символов.

```javascript
var watzThisString = 'JavaScript - Это здорово!'
console.log(watzThisString.substr(2, 5)) // Возвращает "vaScr"
```

- `substring()` - Извлекает символы строки, заключенные между указанными позициями (символ, соответствующий концу диапазона, в результат не включается).

```javascript
var watzThisString = 'JavaScript - Это здорово!'
console.log(watzThisString.substring(2, 5)) // Возвращает "vaS"
```

- `toLowerCase()` - Переводит все символы строки в нижний регистр.

```javascript
var watzThisString = 'JavaScript - Это здорово!'
console.log(watzThisString.toLowerCase()) // Возвращает "javascript - это здорово!"
```

- `toUpperCase()` - Переводит все символы строки в верхний регистр.

```javascript
var watzThisString = 'JavaScript - Это здорово!'
console.log(watzThisString.toUpperCase()) // Возвращает "JAVASCRIPT - ЭТО ЗДОРОВО!"
```

#### Булев тип данных

Булевы переменные принимают одно из двух возможных значений: `true` или `false`.

Булевы переменные часто используют для хранения результатов сравнения. С помощью функции `Boolean()` можно найти булев результат сравнения или преобразовать любое значения JS в булево значение.

```javascript
var isItGreater = Boolean(3 > 20)
alert(isItGreater) // Возвращает false

var areTheySame = Boolean('тигр' === 'Тигр')
alert(areTheySame) // Возвращает false
```

Результат преобразования некоторого значения JS в булево значение с использованием функции `Boolean()` зависит от преобразуемого значения.

- В JS следующие значения всегда дают при вычислении булево значение `false`:
  - `NaN`;
  - `undefined`;
  - `0 (нулевое численное значение)`;
  - `-0`;
  - `"" (пустая строка)`;
  - `false`;
- Все остальное, что не относится к перечисленным выше значениям, дает при вычислении булево значение `true`. Например:

  - `74`;
  - `"Eva"`;
  - `"10"`;
  - `"NaN"`;

  Цифровой символ `0` - Это не то же самое, что число 0 (нуль). Если `0` при преобразовании в булево значение всегда дает `false`, то преобразование строки `"0"` всегда дает `true`.

Булевы значения в основном используются в условных выражениях. Приведенная ниже программа создает булеву переменную, а затем тестирует ее значение с использованием инструкции `if/else`.

```javascript
var b = true
if (b == true) {
	alert('Это true!')
} else {
	alert('Это false.')
}
```

При записи булевых значений их не заключают в кавычки:
`var myVar = true;`
В то же время обьявление `var myVar = "true"` создает строковую переменную.

#### Тип данных `NaN`

_NaN_ - Это сокращение от Not a Number (Не число). Этот результат вы будете получать при попытке выполнить математические операции над строками или в тех случаях, когда вычисление приводит к ошибке или не может быть выполнено. Например, невозможно вычислить квадратный корень отрицательного числа. Результатом такой попытки будет `NaN`.

Чаще всего значение `NaN` возвращается при попытке выполнения математических операций над строками, которые не могут быть преобразованы в числа.

#### Тип данных `undefined`

Даже если вы создадите переменную JS и не присвоите ей какое0либо значение, она всегда будет иметь значение по умолчанию. Таковым является значение `undefined`.
